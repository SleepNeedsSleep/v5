<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glitch</title>
    <meta name="description" content="Glitch Proxy | Made with ❤️ by the Glitch Network">
    <link rel="icon" href="assets/favicon.png" type="image/png">
</head>
<body>
    <noscript>
        <h2>Glitch isn't compatible with your browser :/ or just enable JavaScript</h2>
    </noscript>

    <script>

if (!localStorage.getItem("theme")) {
                    localStorage.setItem("theme", "dark");
                }

        // Load configuration from config.json
        const url = "config.json";
        fetch(url)
            .then(response => response.json())
            .then(config => {
                // Apply configurations based on the fetched data
                

                function decryptCaesarCipher(inputStr, shift) {
            return caesarCipher(inputStr, -shift);
        }

        // Cynex token system



function validateToken(token) {
    const invalidNumbers = ["1", "3", "5", "7", "9", "0"];
    for (let number of invalidNumbers) {
        if (token.includes(number)) {
            return false;
        }
    }

    const validLengths = [25, 28, 35];
    if (!validLengths.includes(token.length)) {
        return false;
    }

    if (token.includes("cyn") && token.includes("tkn")) {
        if (token.includes("tkn_exp")) {
            return false; // How do you even get here?
        }
        return true;
    } else {
        return false;
    }
}




            token = config["premium-key"];
            // Check the token
            if (validateToken(token)) {
                localStorage.setItem("premium", "true");
            } else {
              if (config["premium-key"] != ""){
                alert("Invalid premium key");
              }
              localStorage.setItem("premium", "false");
            }




                if (localStorage.getItem("premium") == "true") {

                // Update localStorage based on the config values
                localStorage.setItem("auto-host", config["auto-host"]);
                localStorage.setItem("ai_teacher_detection", config["ai_teacher_detection"]);
                localStorage.setItem("themes", config["themes"]);
                localStorage.setItem("resolver_default", config["resolver_default"]);
                localStorage.setItem("change_discord_inv_url", config["change_discord_inv_url"]);

                if (config["change_discord_inv_url"] === "True") {
                    localStorage.setItem("new_discord_inv_url", config["new_discord_inv_url"]);
                }

                if (config["force_cloak"] === "True") {
                    window.location.href = "cloak.html";
                } else {
                    window.location.href = "main.html";
                }
            }
            else {
                    window.location.href = "main.html";
                }
            })

            .catch(error => console.error('Error loading the config file:', error));
    </script>
</body>
</html>
